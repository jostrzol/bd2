SQL> 
SQL> -- wyzwalacz SG_ANK_WSTAW_ODPOWIEDZI powinien wstawić odpowiedzi na
SQL> -- wszystkie pytania do ankiety
SQL> INSERT INTO ankiety VALUES (2000, 'SAT-V02', 1006, TO_DATE('09.06.2022', 'DD.MM.YYYY'), 1003, NULL);

1 row inserted.

SQL> SELECT * FROM odpowiedzi WHERE id_ankiety = 2000;

KOD_TYPU NR_PYTANIA ID_ANKIETY      OCENA
-------- ---------- ---------- ----------
SAT-V02           1       2000          0
SAT-V02           2       2000          0
SAT-V02           3       2000          0
SAT-V02           4       2000          0
SAT-V02           5       2000           
SAT-V02           6       2000           

6 rows selected. 

SQL> 
SQL> -- wyzwalacz SG_PYT_NIE_WSTAWIAJ_GDY_TANK_W_UZYCIU powinien nie pozwolić dodawać
SQL> -- pytań do wykorzystywanych już typów ankiet.
SQL> INSERT INTO pytania VALUES ('SAT-V01', 20, 'TEST', NULL, NULL);

Error starting at line : 13 in command -
INSERT INTO pytania VALUES ('SAT-V01', 20, 'TEST', NULL, NULL)
Error report -
ORA-20001: Nie można dodawać pytań do typu ankiety, który jest już w użyciu. Dodaj nowy typ ankiety.
ORA-06512: przy "BD2C070.SG_PYTANIA_NIE_WSTAWIAJ_JESLI_TYP_ANKIETY_W_UZYCIU", linia 29
ORA-04088: błąd w trakcie wykonywania wyzwalacza 'BD2C070.SG_PYTANIA_NIE_WSTAWIAJ_JESLI_TYP_ANKIETY_W_UZYCIU'

SQL> 
SQL> -- wyzwalacz SG_ODP_NIE_USUWAJ_GDY_ANK_ISTNIEJE powinien nie pozwolić usuwać
SQL> -- pojedynczych odpowiedzi
SQL> DELETE odpowiedzi WHERE id_ankiety = 2000;

Error starting at line : 17 in command -
DELETE odpowiedzi WHERE id_ankiety = 2000
Error report -
ORA-20000: Nie można usunąć pojedynczych odpowiedzi. Aby usunąć odpowiedzi należy usunąć całą ankietę
ORA-06512: przy "BD2C070.SG_ODPOWIEDZI_NIE_USUWAJ_JESLI_ANKIETA_ISTNIEJE", linia 48
ORA-04088: błąd w trakcie wykonywania wyzwalacza 'BD2C070.SG_ODPOWIEDZI_NIE_USUWAJ_JESLI_ANKIETA_ISTNIEJE'

SQL> 
SQL> -- reguła ON DELETE CASCADE na związku ankiety-odpowiedzi
SQL> DELETE ankiety WHERE id_ankiety = 2000;

1 row deleted.

SQL> 
SQL> spool off;
